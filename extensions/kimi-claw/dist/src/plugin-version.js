import{readFileSync}from"node:fs";import{fileURLToPath}from"node:url";import{asTrimmedNonEmptyString}from"./utils/text.js";const DEFAULT_PLUGIN_VERSION="0.1.0",readVersionFromJsonFile=r=>{try{const e=readFileSync(fileURLToPath(r),"utf-8"),o=JSON.parse(e);if(!o||"object"!=typeof o||Array.isArray(o))return;return asTrimmedNonEmptyString(o.version)}catch{return}};export const resolvePluginVersion=()=>{const r=[new URL("../openclaw.plugin.json",import.meta.url),new URL("../../openclaw.plugin.json",import.meta.url),new URL("../package.json",import.meta.url),new URL("../../package.json",import.meta.url)];for(const e of r){const r=readVersionFromJsonFile(e);if(r)return r}return"0.1.0"};